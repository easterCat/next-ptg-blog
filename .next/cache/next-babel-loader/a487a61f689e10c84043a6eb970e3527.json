{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Card from \"antd/lib/card\";\nimport _Avatar from \"antd/lib/avatar\";\nimport _Typography from \"antd/lib/typography\";\nvar _jsxFileName = \"/Users/mac/Projects/next-demo/pages/index.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/MyLayout\";\nimport fetch from \"isomorphic-unfetch\";\nvar Title = _Typography.Title,\n    Paragraph = _Typography.Paragraph,\n    Text = _Typography.Text;\n\nvar Index = function Index(props) {\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, __jsx(Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"Batman TV Shows\"), __jsx(Paragraph, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Hello userAgent is \", props.userAgent, \"\\u8682\\u8681\\u7684\\u4F01\\u4E1A\\u7EA7\\u4EA7\\u54C1\\u662F\\u4E00\\u4E2A\\u5E9E\\u5927\\u4E14\\u590D\\u6742\\u7684\\u4F53\\u7CFB\\u3002\\u8FD9\\u7C7B\\u4EA7\\u54C1\\u4E0D\\u4EC5\\u91CF\\u7EA7\\u5DE8\\u5927\\u4E14\\u529F\\u80FD\\u590D\\u6742\\uFF0C\\u800C\\u4E14\\u53D8\\u52A8\\u548C\\u5E76\\u53D1\\u9891\\u7E41\\uFF0C\\u5E38\\u5E38\\u9700\\u8981\\u8BBE\\u8BA1\\u4E0E\\u5F00\\u53D1\\u80FD\\u591F\\u5FEB\\u901F\\u7684\\u505A\\u51FA\\u54CD\\u5E94\\u3002\\u540C\\u65F6\\u8FD9\\u7C7B\\u4EA7\\u54C1\\u4E2D\\u6709\\u5B58\\u5728\\u5F88\\u591A\\u7C7B\\u4F3C\\u7684\\u9875\\u9762\\u4EE5\\u53CA\\u7EC4\\u4EF6\\uFF0C\\u53EF\\u4EE5\\u901A\\u8FC7\\u62BD\\u8C61\\u5F97\\u5230\\u4E00\\u4E9B\\u7A33\\u5B9A\\u4E14\\u9AD8\\u590D\\u7528\\u6027\\u7684\\u5185\\u5BB9\\u3002\"), __jsx(\"h2\", {\n    className: \"jsx-4181757484\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"Hello userAgent is \", props.userAgent), __jsx(\"ul\", {\n    className: \"jsx-4181757484\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, props.shows.map(function (show) {\n    return __jsx(_Card, {\n      style: {\n        width: \"100%\",\n        marginTop: 16\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, __jsx(_Card.Meta, {\n      avatar: __jsx(_Avatar, {\n        src: show.image.medium,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }),\n      title: show.name,\n      description: show.summary,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }));\n  })), __jsx(_JSXStyle, {\n    id: \"4181757484\",\n    __self: this\n  }, \"h1.jsx-4181757484,a.jsx-4181757484{font-family:\\\"Arial\\\";}ul.jsx-4181757484{padding:0;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWMvUHJvamVjdHMvbmV4dC1kZW1vL3BhZ2VzL2luZGV4LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1RGdCLEFBSTZCLEFBSVYsVUFDWixVQUpBIiwiZmlsZSI6Ii9Vc2Vycy9tYWMvUHJvamVjdHMvbmV4dC1kZW1vL3BhZ2VzL2luZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMYXlvdXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvTXlMYXlvdXRcIjtcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcbmltcG9ydCBmZXRjaCBmcm9tIFwiaXNvbW9ycGhpYy11bmZldGNoXCI7XG5pbXBvcnQgeyBUeXBvZ3JhcGh5LCBEaXZpZGVyLCBQYWdlSGVhZGVyLCBDYXJkLCBJY29uLCBBdmF0YXIgfSBmcm9tIFwiYW50ZFwiO1xuY29uc3QgeyBUaXRsZSwgUGFyYWdyYXBoLCBUZXh0IH0gPSBUeXBvZ3JhcGh5O1xuXG5pbnRlcmZhY2UgSUNvbnRleHQge1xuICByZXE6IElSZXE7XG59XG5cbmludGVyZmFjZSBJUmVxIHtcbiAgaGVhZGVyczogSUhlYWRlcnM7XG59XG5cbmludGVyZmFjZSBJSGVhZGVycyB7XG4gIFwidXNlci1hZ2VudFwiOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBEZWZhdWx0UHJvcHMge1xuICBzaG93czogYW55W107XG4gIHVzZXJBZ2VudDogU3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgSUl0ZW0ge1xuICBzaG93OiBvYmplY3Q7XG59XG5cbmludGVyZmFjZSBJU2hvdyB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3VtbWFyeTogc3RyaW5nO1xuICBpbWFnZToge1xuICAgIG1lZGl1bTogc3RyaW5nO1xuICB9O1xufVxuXG5jb25zdCBJbmRleCA9IChwcm9wczogRGVmYXVsdFByb3BzKSA9PiAoXG4gIDxMYXlvdXQ+XG4gICAgPFRpdGxlPkJhdG1hbiBUViBTaG93czwvVGl0bGU+XG4gICAgPFBhcmFncmFwaD5cbiAgICAgIEhlbGxvIHVzZXJBZ2VudCBpcyB7cHJvcHMudXNlckFnZW50fVxuICAgICAg6JqC6JqB55qE5LyB5Lia57qn5Lqn5ZOB5piv5LiA5Liq5bqe5aSn5LiU5aSN5p2C55qE5L2T57O744CC6L+Z57G75Lqn5ZOB5LiN5LuF6YeP57qn5beo5aSn5LiU5Yqf6IO95aSN5p2C77yM6ICM5LiU5Y+Y5Yqo5ZKM5bm25Y+R6aKR57mB77yM5bi45bi46ZyA6KaB6K6+6K6h5LiO5byA5Y+R6IO95aSf5b+r6YCf55qE5YGa5Ye65ZON5bqU44CC5ZCM5pe26L+Z57G75Lqn5ZOB5Lit5pyJ5a2Y5Zyo5b6I5aSa57G75Ly855qE6aG16Z2i5Lul5Y+K57uE5Lu277yM5Y+v5Lul6YCa6L+H5oq96LGh5b6X5Yiw5LiA5Lqb56iz5a6a5LiU6auY5aSN55So5oCn55qE5YaF5a6544CCXG4gICAgPC9QYXJhZ3JhcGg+XG4gICAgPGgyPkhlbGxvIHVzZXJBZ2VudCBpcyB7cHJvcHMudXNlckFnZW50fTwvaDI+XG4gICAgPHVsPlxuICAgICAge3Byb3BzLnNob3dzLm1hcCgoc2hvdzogSVNob3cpID0+IChcbiAgICAgICAgPENhcmQgc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiLCBtYXJnaW5Ub3A6IDE2IH19PlxuICAgICAgICAgIDxDYXJkLk1ldGFcbiAgICAgICAgICAgIGF2YXRhcj17PEF2YXRhciBzcmM9e3Nob3cuaW1hZ2UubWVkaXVtfSAvPn1cbiAgICAgICAgICAgIHRpdGxlPXtzaG93Lm5hbWV9XG4gICAgICAgICAgICBkZXNjcmlwdGlvbj17c2hvdy5zdW1tYXJ5fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvQ2FyZD5cbiAgICAgICkpfVxuICAgIDwvdWw+XG4gICAgPHN0eWxlIGpzeD57YFxuICAgICAgaDEsXG4gICAgICBhIHtcbiAgICAgICAgZm9udC1mYW1pbHk6IFwiQXJpYWxcIjtcbiAgICAgIH1cblxuICAgICAgdWwge1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgfVxuICAgIGB9PC9zdHlsZT5cbiAgPC9MYXlvdXQ+XG4pO1xuXG5JbmRleC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyBmdW5jdGlvbihjb250ZXh0OiBJQ29udGV4dCkge1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBpLnR2bWF6ZS5jb20vc2VhcmNoL3Nob3dzP3E9YmF0bWFuXCIpO1xuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgY29uc3QgdXNlckFnZW50ID0gY29udGV4dC5yZXFcbiAgICA/IGNvbnRleHQucmVxLmhlYWRlcnNbXCJ1c2VyLWFnZW50XCJdXG4gICAgOiBuYXZpZ2F0b3IudXNlckFnZW50O1xuICByZXR1cm4ge1xuICAgIHNob3dzOiBkYXRhLm1hcCgoaXRlbTogSUl0ZW0pOiBvYmplY3QgPT4gaXRlbS5zaG93KSxcbiAgICB1c2VyQWdlbnRcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEluZGV4O1xuIl19 */\\n/*@ sourceURL=/Users/mac/Projects/next-demo/pages/index.tsx */\"));\n};\n\nIndex.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(context) {\n    var res, data, userAgent;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"https://api.tvmaze.com/search/shows?q=batman\");\n\n          case 2:\n            res = _context.sent;\n            _context.next = 5;\n            return res.json();\n\n          case 5:\n            data = _context.sent;\n            userAgent = context.req ? context.req.headers[\"user-agent\"] : navigator.userAgent;\n            return _context.abrupt(\"return\", {\n              shows: data.map(function (item) {\n                return item.show;\n              }),\n              userAgent: userAgent\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Index;","map":{"version":3,"sources":["/Users/mac/Projects/next-demo/pages/index.tsx"],"names":["Layout","fetch","Title","Paragraph","Text","Index","props","userAgent","shows","map","show","width","marginTop","image","medium","name","summary","getInitialProps","context","res","json","data","req","headers","navigator","item"],"mappings":";;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,wBAAnB;AAEA,OAAOC,KAAP,MAAkB,oBAAlB;IAEQC,K,eAAAA,K;IAAOC,S,eAAAA,S;IAAWC,I,eAAAA,I;;AAgC1B,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,KAAD;AAAA,SACZ,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACsBA,KAAK,CAACC,SAD5B,6oBAFF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAwBD,KAAK,CAACC,SAA9B,CANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,KAAK,CAACE,KAAN,CAAYC,GAAZ,CAAgB,UAACC,IAAD;AAAA,WACf;AAAM,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,SAAS,EAAE;AAA5B,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,YAAM,IAAN;AACE,MAAA,MAAM,EAAE;AAAQ,QAAA,GAAG,EAAEF,IAAI,CAACG,KAAL,CAAWC,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADV;AAEE,MAAA,KAAK,EAAEJ,IAAI,CAACK,IAFd;AAGE,MAAA,WAAW,EAAEL,IAAI,CAACM,OAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADe;AAAA,GAAhB,CADH,CAPF;AAAA;AAAA;AAAA,ypGADY;AAAA,CAAd;;AAgCAX,KAAK,CAACY,eAAN;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAwB,iBAAeC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACJjB,KAAK,CAAC,8CAAD,CADD;;AAAA;AAChBkB,YAAAA,GADgB;AAAA;AAAA,mBAEHA,GAAG,CAACC,IAAJ,EAFG;;AAAA;AAEhBC,YAAAA,IAFgB;AAGhBd,YAAAA,SAHgB,GAGJW,OAAO,CAACI,GAAR,GACdJ,OAAO,CAACI,GAAR,CAAYC,OAAZ,CAAoB,YAApB,CADc,GAEdC,SAAS,CAACjB,SALQ;AAAA,6CAMf;AACLC,cAAAA,KAAK,EAAEa,IAAI,CAACZ,GAAL,CAAS,UAACgB,IAAD;AAAA,uBAAyBA,IAAI,CAACf,IAA9B;AAAA,eAAT,CADF;AAELH,cAAAA,SAAS,EAATA;AAFK,aANe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAxB;;AAAA;AAAA;AAAA;AAAA;;AAYA,eAAeF,KAAf","sourcesContent":["import Layout from \"../components/MyLayout\";\nimport Link from \"next/link\";\nimport fetch from \"isomorphic-unfetch\";\nimport { Typography, Divider, PageHeader, Card, Icon, Avatar } from \"antd\";\nconst { Title, Paragraph, Text } = Typography;\n\ninterface IContext {\n  req: IReq;\n}\n\ninterface IReq {\n  headers: IHeaders;\n}\n\ninterface IHeaders {\n  \"user-agent\": string;\n}\n\ninterface DefaultProps {\n  shows: any[];\n  userAgent: String;\n}\n\ninterface IItem {\n  show: object;\n}\n\ninterface IShow {\n  id: string;\n  name: string;\n  summary: string;\n  image: {\n    medium: string;\n  };\n}\n\nconst Index = (props: DefaultProps) => (\n  <Layout>\n    <Title>Batman TV Shows</Title>\n    <Paragraph>\n      Hello userAgent is {props.userAgent}\n      蚂蚁的企业级产品是一个庞大且复杂的体系。这类产品不仅量级巨大且功能复杂，而且变动和并发频繁，常常需要设计与开发能够快速的做出响应。同时这类产品中有存在很多类似的页面以及组件，可以通过抽象得到一些稳定且高复用性的内容。\n    </Paragraph>\n    <h2>Hello userAgent is {props.userAgent}</h2>\n    <ul>\n      {props.shows.map((show: IShow) => (\n        <Card style={{ width: \"100%\", marginTop: 16 }}>\n          <Card.Meta\n            avatar={<Avatar src={show.image.medium} />}\n            title={show.name}\n            description={show.summary}\n          />\n        </Card>\n      ))}\n    </ul>\n    <style jsx>{`\n      h1,\n      a {\n        font-family: \"Arial\";\n      }\n\n      ul {\n        padding: 0;\n      }\n    `}</style>\n  </Layout>\n);\n\nIndex.getInitialProps = async function(context: IContext) {\n  const res = await fetch(\"https://api.tvmaze.com/search/shows?q=batman\");\n  const data = await res.json();\n  const userAgent = context.req\n    ? context.req.headers[\"user-agent\"]\n    : navigator.userAgent;\n  return {\n    shows: data.map((item: IItem): object => item.show),\n    userAgent\n  };\n};\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}